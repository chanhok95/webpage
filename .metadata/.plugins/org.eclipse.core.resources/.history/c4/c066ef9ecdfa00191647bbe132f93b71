package com.java.guest.command;

import java.util.ArrayList;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.java.commad.CommandAction;
import com.java.guest.dao.GuestDao;
import com.java.guest.dto.GuestDto;

public class WriteAction implements CommandAction {

	@Override
	public String proRequest(HttpServletRequest request, HttpServletResponse response) throws Throwable {
		//list - Page 기법,	Write - 
		
		String pageNumber= request.getParameter("pageNumber");
		if(pageNumber ==null) pageNumber="1";
		
		int currentPage = Integer.parseInt(pageNumber); // 1) 요청페이지 1
		
		logger.info(logMsg+ currentPage);
		
		int boardSize = 10; // 2) 페이지당 출력할 게시물 수
		
		int starRow=(currentPage-1)*boardSize+1; 		//시작번호
		int endRow= boardSize*currentPage; 				//끝번호
		logger.info(logMsg+starRow+","+ endRow);
		
		ArrayList<GuestDto> guestList = GuestDao.getInstance().guestList(starRow,endRow);
		logger.info(logMsg+guestList.size());
		
		return "/WEB-INF/view/guest/write.jsp";
	
	}

}
